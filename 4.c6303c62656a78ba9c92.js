(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Iab2:function(t,e,a){var n,o;void 0===(o="function"==typeof(n=function(){"use strict";function e(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){c(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,c){var l=o.URL||o.webkitURL,b=document.createElement("a");b.download=i=i||t.name||"download",b.rel="noopener","string"==typeof t?(b.href=t,b.origin===location.origin?n(b):a(b.href)?e(t,i,c):n(b,b.target="_blank")):(b.href=l.createObjectURL(t),setTimeout(function(){l.revokeObjectURL(b.href)},4e4),setTimeout(function(){n(b)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,i){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),o);else if(a(t))e(t,o,i);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){n(c)})}}:function(t,a,n,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,n);var l="application/octet-stream"===t.type,b=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||l&&b||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},d.readAsDataURL(t)}else{var r=o.URL||o.webkitURL,u=r.createObjectURL(t);c?c.location=u:location.href=u,c=null,setTimeout(function(){r.revokeObjectURL(u)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})?n.apply(e,[]):n)||(t.exports=o)},jkDv:function(t,e,a){"use strict";a.r(e),a.d(e,"AdminModule",function(){return O});var n=a("ofXK"),o=a("fXoL"),i=a("yTNM"),c=a("tyNb"),l=a("/t3+"),b=a("bTqV"),s=a("NFeN"),d=a("XhcP"),r=a("MutI"),u=a("FKr1");let p=(()=>{class t{constructor(t,e){this.api=t,this.router=e,this.mode="side"}ngOnInit(){this.checkLogin()}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}logout(){confirm("Keluar Aplikasi?")&&(localStorage.removeItem("appToken"),window.location.reload())}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(i.a),o.Nb(c.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-admin"]],decls:31,vars:8,consts:[["color","primary",1,"example-header"],["mat-icon-button","",3,"click"],[1,"spacer"],["mat-button",""],["mat-button","",3,"click"],[1,"example-container"],["mode","side","opened","",1,"sidenav-left",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],["routerLink","/admin/dashboard"],["matListIcon",""],["matLine","",1,"text-white"],["routerLink","/admin/produk"],["mode","side",1,"example-sidenav",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],[2,"padding","20px","background-color","#ccc"]],template:function(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"mat-toolbar",0),o.Tb(2,"button",1),o.ac("click",function(){return o.qc(t),o.oc(14).toggle()}),o.Tb(3,"mat-icon"),o.xc(4,"menu"),o.Sb(),o.Sb(),o.Tb(5,"span"),o.xc(6,"My Angular"),o.Sb(),o.Ob(7,"span",2),o.Tb(8,"button",3),o.xc(9,"ADMIN"),o.Sb(),o.Tb(10,"button",4),o.ac("click",function(){return e.logout()}),o.xc(11,"keluar"),o.Sb(),o.Sb(),o.Tb(12,"mat-sidenav-container",5),o.Tb(13,"mat-sidenav",6,7),o.Tb(15,"mat-nav-list"),o.Tb(16,"div"),o.Tb(17,"mat-list-item",8),o.Tb(18,"mat-icon",9),o.xc(19,"dashboard"),o.Sb(),o.Tb(20,"h3",10),o.xc(21,"dashboard"),o.Sb(),o.Sb(),o.Tb(22,"mat-list-item",11),o.Tb(23,"mat-icon",9),o.xc(24,"camera_enhance"),o.Sb(),o.Tb(25,"h3",10),o.xc(26,"produk"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Ob(27,"mat-sidenav",12,7),o.Tb(29,"mat-sidenav-content",13),o.Ob(30,"router-outlet"),o.Sb(),o.Sb(),o.Qb()}2&t&&(o.Cb(13),o.jc("position","start")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0),o.Cb(14),o.jc("position","end")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0))},directives:[l.a,b.a,s.a,d.b,d.a,r.d,r.b,c.b,r.a,u.j,d.c,c.d],styles:[".example-container[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}.example-sidenav[_ngcontent-%COMP%]{width:350px}.example-sidenav[_ngcontent-%COMP%], .sidenav-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sidenav-left[_ngcontent-%COMP%]{width:250px}"]}),t})(),f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Tb(0,"p"),o.xc(1,"dashboard works!"),o.Sb())},styles:[""]}),t})();var h=a("w55g"),g=a("Iab2"),m=a("0IaG");let T=(()=>{class t{constructor(t,e,a){this.api=t,this.dialogRef=e,this.dialogData=a,this.loadingUpload=!1}ngOnInit(){console.log(this.dialogData)}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0],console.log(this.selectedFile))}uploadFile(){let t=new FormData;t.append("file",this.selectedFile),this.loadingUpload=!0,this.api.upload(t).subscribe(t=>{this.updateProduct(t)},t=>{this.loadingUpload=!1,alert("Gagal mengunggah file")})}updateProduct(t){1==t.status?(alert("File berhasil diunggah"),this.dialogRef.close(),this.updateBook(t)):alert(t.message)}updateBook(t){this.api.put("book/"+this.dialogData.id,{url:t.url}).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(i.a),o.Nb(m.g),o.Nb(m.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-file-uploader"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"uk-flex","uk-flex-middle","uk-flex-center",2,"height","100px","outline","2px dashed #ccc","margin","10px",3,"click"],["type","file","id","file",2,"display","none",3,"change"],["fileInput",""],["mat-dialog-action","","align","right"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"click"]],template:function(t,e){if(1&t){const t=o.Ub();o.Tb(0,"h1",0),o.xc(1,"Unggah File"),o.Sb(),o.Tb(2,"div",1),o.Tb(3,"div",2),o.ac("click",function(){return o.qc(t),o.oc(7).click()}),o.Tb(4,"span"),o.xc(5),o.Sb(),o.Sb(),o.Tb(6,"input",3,4),o.ac("change",function(t){return e.onFileChange(t)}),o.Sb(),o.Sb(),o.Tb(8,"div",5),o.Tb(9,"button",6),o.xc(10,"Batal"),o.Sb(),o.Tb(11,"button",7),o.ac("click",function(){return e.uploadFile()}),o.xc(12,"Upload"),o.Sb(),o.Sb()}2&t&&(o.Cb(5),o.yc(e.selectedFile?e.selectedFile.name:"Pilih File"))},directives:[m.h,m.e,b.a,m.d],styles:[""]}),t})();var x=a("kmnG"),S=a("qFsG"),k=a("3Pt+");let v=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.api=a,this.loading=!1}ngOnInit(){}saveData(){this.loading=!0,null==this.data.id?this.api.post("books",this.data).subscribe(t=>{this.dialogRef.close(t),this.loading=!1},t=>{alert(t),this.loading=!1}):this.api.put("books/"+this.data.id,this.data).subscribe(t=>{console.log(t),this.loading=!1,this.dialogRef.close(t),location.reload()},t=>{alert(t),this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(m.g),o.Nb(m.a),o.Nb(i.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-produk-detail"]],decls:32,vars:8,consts:[["mat-dialog-title","",2,"color","aliceblue"],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(o.Tb(0,"h3",0),o.xc(1," Detail Produk "),o.Sb(),o.Tb(2,"div",1),o.Tb(3,"mat-form-field",2),o.Tb(4,"mat-label"),o.xc(5,"Judul"),o.Sb(),o.Tb(6,"input",3),o.ac("ngModelChange",function(t){return e.data.title=t}),o.Sb(),o.Sb(),o.Tb(7,"mat-form-field",2),o.Tb(8,"mat-label"),o.xc(9,"Penulis"),o.Sb(),o.Tb(10,"input",3),o.ac("ngModelChange",function(t){return e.data.author=t}),o.Sb(),o.Sb(),o.Tb(11,"mat-form-field",2),o.Tb(12,"mat-label"),o.xc(13,"Penerbit"),o.Sb(),o.Tb(14,"input",3),o.ac("ngModelChange",function(t){return e.data.publisher=t}),o.Sb(),o.Sb(),o.Tb(15,"mat-form-field",2),o.Tb(16,"mat-label"),o.xc(17,"Tahun Terbit"),o.Sb(),o.Tb(18,"input",3),o.ac("ngModelChange",function(t){return e.data.year=t}),o.Sb(),o.Sb(),o.Tb(19,"mat-form-field",2),o.Tb(20,"mat-label"),o.xc(21,"ISBN"),o.Sb(),o.Tb(22,"input",3),o.ac("ngModelChange",function(t){return e.data.isbn=t}),o.Sb(),o.Sb(),o.Tb(23,"mat-form-field",2),o.Tb(24,"mat-label"),o.xc(25,"Harga"),o.Sb(),o.Tb(26,"input",4),o.ac("ngModelChange",function(t){return e.data.price=t}),o.Sb(),o.Sb(),o.Sb(),o.Tb(27,"div",5),o.Tb(28,"button",6),o.xc(29,"Batal"),o.Sb(),o.Tb(30,"button",7),o.ac("click",function(){return e.saveData()}),o.xc(31),o.Sb(),o.Sb()),2&t&&(o.Cb(6),o.jc("ngModel",e.data.title),o.Cb(4),o.jc("ngModel",e.data.author),o.Cb(4),o.jc("ngModel",e.data.publisher),o.Cb(4),o.jc("ngModel",e.data.year),o.Cb(4),o.jc("ngModel",e.data.isbn),o.Cb(4),o.jc("ngModel",e.data.price),o.Cb(4),o.jc("disabled",e.loading),o.Cb(1),o.yc(e.loading?"Menyimpan..":"Simpan"))},directives:[m.h,m.e,x.b,x.e,S.b,k.c,k.j,k.l,k.m,m.c,b.a,m.d],styles:[""]}),t})();var w=a("Xa2L"),y=a("Wp6s");function C(t,e){1&t&&(o.Tb(0,"div",2),o.Ob(1,"mat-spinner"),o.Sb())}function M(t,e){if(1&t){const t=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td"),o.Tb(2,"button",9),o.ac("click",function(){o.qc(t);const a=e.$implicit;return o.ec(2).downloadFile(a)}),o.Tb(3,"mat-icon"),o.xc(4,"download"),o.Sb(),o.Sb(),o.Sb(),o.Tb(5,"td"),o.xc(6),o.Sb(),o.Tb(7,"td"),o.xc(8),o.Sb(),o.Tb(9,"td"),o.xc(10),o.Sb(),o.Tb(11,"td"),o.xc(12),o.Sb(),o.Tb(13,"td"),o.xc(14),o.Sb(),o.Tb(15,"td"),o.xc(16),o.Sb(),o.Tb(17,"td"),o.xc(18),o.Sb(),o.Tb(19,"td"),o.Tb(20,"button",10),o.ac("click",function(){o.qc(t);const a=e.$implicit,n=e.index;return o.ec(2).upload(a,n)}),o.xc(21,"Upload"),o.Sb(),o.Tb(22,"button",11),o.ac("click",function(){o.qc(t);const a=e.$implicit,n=e.index;return o.ec(2).productDetail(a,n)}),o.xc(23,"Edit"),o.Sb(),o.Tb(24,"button",12),o.ac("click",function(){o.qc(t);const a=e.index;return o.ec(2).deleteProduct(a)}),o.xc(25),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,a=e.index,n=o.ec(2);o.Cb(6),o.yc(a+1),o.Cb(2),o.yc(t.title),o.Cb(2),o.yc(t.author),o.Cb(2),o.yc(t.publisher),o.Cb(2),o.yc(t.year),o.Cb(2),o.yc(t.isbn),o.Cb(2),o.yc(t.price),o.Cb(6),o.jc("disabled",n.loadingDelete[a]),o.Cb(1),o.yc(n.loadingDelete[a]?"Menghapus..":"Delete")}}function j(t,e){if(1&t){const t=o.Ub();o.Tb(0,"mat-card"),o.Tb(1,"mat-card-header"),o.Tb(2,"mat-card-title"),o.xc(3),o.Sb(),o.Sb(),o.Tb(4,"mat-card-content"),o.Tb(5,"div",3),o.Ob(6,"span",4),o.Tb(7,"button",5),o.ac("click",function(){return o.qc(t),o.ec().productDetail({},-1)}),o.Tb(8,"mat-icon"),o.xc(9,"add"),o.Sb(),o.xc(10," Tambah Produk"),o.Sb(),o.Sb(),o.Tb(11,"table",6),o.Tb(12,"thead"),o.Tb(13,"tr"),o.Ob(14,"th"),o.Tb(15,"th",7),o.xc(16,"NO"),o.Sb(),o.Tb(17,"th",7),o.xc(18,"JUDUL"),o.Sb(),o.Tb(19,"th",7),o.xc(20,"PENULIS"),o.Sb(),o.Tb(21,"th",7),o.xc(22,"PENERBIT"),o.Sb(),o.Tb(23,"th",7),o.xc(24,"TAHUN TERBIT"),o.Sb(),o.Tb(25,"th",7),o.xc(26,"ISBN"),o.Sb(),o.Tb(27,"th",7),o.xc(28,"HARGA"),o.Sb(),o.Tb(29,"th",7),o.xc(30,"ACTION"),o.Sb(),o.Sb(),o.Sb(),o.Tb(31,"tbody"),o.wc(32,M,26,9,"tr",8),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Cb(3),o.yc(t.title),o.Cb(29),o.jc("ngForOf",t.books)}}const I=[{path:"",component:p,children:[{path:"dashboard",component:f},{path:"produk",component:(()=>{class t{constructor(t,e,a){this.router=t,this.dialog=e,this.api=a,this.book={},this.books=[],this.loading=!1,this.loadingDelete={},this.title="Produk",this.getBooks()}ngOnInit(){this.title="product"}getBooks(){this.loading=!0,this.api.get("bookswithauth").subscribe(t=>{this.books=t,this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat mengambil data")})}productDetail(t,e){this.dialog.open(v,{width:"400px",data:t}).afterClosed().subscribe(t=>{t&&(-1==e?this.books.push(t):this.books[e]=t)})}deleteProduct(t){confirm("Delete item?")&&(this.loadingDelete[t]=!0),this.api.delete("books/"+this.books[t].id).subscribe(e=>{this.books.splice(t,1),this.loadingDelete[t]=!1},e=>{alert("Tidak dapat menghapus data"),this.loadingDelete[t]=!1})}upload(t,e){this.dialog.open(T,{width:"400px",data:t}).afterClosed().subscribe(t=>{})}downloadFile(t){g.saveAs("http://api.sunhouse.co.id/bookstore//"+t.url)}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(c.a),o.Nb(m.b),o.Nb(i.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-produk"]],decls:2,vars:2,consts:[["class","uk-flex uk-flex-center uk-flex-middle","style","height: 450px;",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-flex-middle",2,"height","450px"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"table","table-striped","table-dark","uk-table","uk-table-responsive","uk-table-divider","uk-table-middle"],["scope","col"],[4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","type","button",1,"text-primary","mr-1",3,"click"],["mat-button","","type","button",1,"text-warning",3,"disabled","click"]],template:function(t,e){1&t&&(o.wc(0,C,2,0,"div",0),o.wc(1,j,33,2,"mat-card",1)),2&t&&(o.jc("ngIf",e.loading),o.Cb(1),o.jc("ngIf",!e.loading))},directives:[n.k,w.b,y.a,y.c,y.e,y.b,b.a,s.a,n.j],styles:[""]}),t})()}]}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({imports:[[n.c,c.c.forChild(I),h.a,k.f]]}),t})()}}]);